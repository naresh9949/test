(this["webpackJsonpFrontend-Template"]=this["webpackJsonpFrontend-Template"]||[]).push([[11],{383:function(e,t,n){"use strict";var a=n(32),c=n(18),s=n(6),r=n(14),o=n.n(r),i=n(1),l=n.n(i),d=(n(53),n(290)),u=n(194),j=n(20),p=n(22),b=n(132),x=n(0);t.a=function(e){var t=Object(i.useState)({open:!1}),n=Object(s.a)(t,2),r=n[0],O=n[1];if(!e.reportId)throw new Error("Import Button requires reportType prop");var h=Object(i.useState)(""),g=Object(s.a)(h,2),f=g[0],y=g[1],m=Object(i.useState)(!1),v=Object(s.a)(m,2),I=v[0],C=v[1],w=Object(j.a)(),S=function(){var t=Object(c.a)(o.a.mark((function t(n){var c,s,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),t.prev=1,t.next=4,Object(p.b)(f);case 4:(c=t.sent).data&&(s=new Date,(r=document.createElement("a")).href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+c.data,r.download="".concat(e.reportId,"_").concat(s.toLocaleString(),".xlsx"),r.click(),O({open:!0,message:"File Downloaded Successfully",severity:"success",time:1500})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(Object(a.a)({},t.t0)),i={open:!0,message:t.t0.response.data.message,severity:"error",time:null},O(i);case 13:C(!1);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){for(var t=e.data,n=Object.keys(t),a=Object.values(t),c="".concat("http://localhost:3001/dev","/ExportImport/export?reportId=").concat(e.reportId),s=0;s<n.length;s++)c=(c+="&")+n[s]+"="+a[s];console.log(c),y(c)}),[e]),Object(x.jsxs)(l.a.Fragment,{children:[r.open&&Object(x.jsx)(b.a,{open:r.open,close:O,time:r.time,message:r.message,severity:r.severity}),Object(x.jsxs)(d.a,{fullWidth:!0,variant:"contained",onClick:S,component:"span",children:[!I&&"Export",I&&"Downloading...",I&&Object(x.jsx)(u.a,{size:24,sx:{color:"".concat(w.palette.secondary.main),position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})}},479:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var a=n(18),c=n(6),s=n(14),r=n.n(s),o=n(1),i=n.n(o),l=n(476),d=n(491),u=n(367),j=n(468),p=n(84),b=n(22),x=n(90),O=n(32),h=n(487),g=n(488),f=n(358),y=n(195),m=n(483),v=n(355),I=n(290),C=n(196),w=n(350),S=n(484),k=n(489),L=n(485),T=n(486),F=n(413),z=n.n(F),P=n(362),D=n(412),A=n(475),U=n(0);function R(e){var t=e.id,n=e.FacilityCode,a=e.userFacility,s=o.useState(!1),r=Object(c.a)(s,2),i=r[0],l=r[1];return Object(o.useEffect)((function(){n!=a&&l(!0)})),Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(P.a,{disabled:i,children:Object(U.jsx)(z.a,{onClick:function(){console.log(t.id)}})})})}function E(e){var t=e.freeze,n=e.ID,a=e.FacilityCode,s=e.userFacility,r=o.useState(t),i=Object(c.a)(r,2),l=i[0],d=i[1],u=o.useState(!1),j=Object(c.a)(u,2),p=(j[0],j[1],o.useState(!1)),b=Object(c.a)(p,2),x=b[0],O=b[1];return Object(o.useEffect)((function(){a!=s&&O(!0)}),[]),Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(m.a,{checked:l,onChange:function(e){var t={ID:n,checked:e.target.checked};d(e.target.checked),console.log(t),Object(D.a)({eventData:t})},disabled:x})})}function q(e){var t=e.assignedUsersList,n=e.ItemKey,s=(e.locationId,e.inventorycyclecountsequenceId),i=e.assignedUser,l=e.FacilityCode,d=e.InventoryIdentifier,u=e.countstatus,j=e.userFacility,p=o.useState(),x=Object(c.a)(p,2),h=x[0],g=x[1],f=o.useState(""),y=Object(c.a)(f,2),m=y[0],I=y[1],C=o.useState(""),S=Object(c.a)(C,2),k=(S[0],S[1]),L=o.useState(t),T=Object(c.a)(L,2),F=T[0],z=(T[1],o.useState(t)),P=Object(c.a)(z,2),D=P[0],A=P[1],R=o.useState(!1),E=Object(c.a)(R,2),q=E[0],W=E[1];Object(o.useEffect)(Object(a.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i&&t.length>0&&g(i),l!=j&&W(!0),3!=u&&4!=u){e.next=4;break}return e.delegateYield(r.a.mark((function e(){var t,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("/cycleCountMaintenance/getListOfAssignedUsersForAnItem?ItemKey="+n+"&InventoryIdentifier="+d+"&SequenceId="+s+"&FacilityCode="+l);case 2:if(t=e.sent,console.log(t),t.data)for(c=function(e){t.data[e].CountStatusId!=u&&(a=F.find((function(n){return n.key===t.data[e].CountedBy})),D=D.filter((function(e){return e.key!=a.key})),K(D))},o=0;o<t.data.length;o++)c(o);case 5:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:case"end":return e.stop()}}),e)}))),[i]);var K=function(e){A(e)},N=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t),g(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsx)(w.a,{disablePortal:!0,disabled:q,value:h,onChange:function(e,t){N(t)},inputValue:m,onInputChange:function(e,t){I(t)},options:D,getOptionLabel:function(e){return e.value},sx:{width:"auto",marginLeft:0,marginRight:2},renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{variant:"outlined",size:"small"}))}})}function W(e){var t=e.countStatus,n=e.assignedUsersList,s=e.locationId,i=e.row,l=e.setRow,d=e.facilityCode,u=o.useState([1]),j=Object(c.a)(u,2),p=j[0],x=(j[1],o.useState(!0)),F=Object(c.a)(x,2),z=(F[0],F[1]),P=o.useState(!1),W=Object(c.a)(P,2),K=W[0],N=W[1],M=o.useState(!1),B=Object(c.a)(M,2),Y=B[0],H=B[1],Q=o.useState(null),V=Object(c.a)(Q,2),G=V[0],J=V[1],_=o.useState(null),X=Object(c.a)(_,2),Z=X[0],$=X[1],ee=o.useState([]),te=Object(c.a)(ee,2),ne=te[0],ae=te[1],ce=o.useState(""),se=Object(c.a)(ce,2),re=se[0],oe=se[1],ie=o.useState(),le=Object(c.a)(ie,2),de=le[0],ue=le[1];function je(e){"open"==e.type?console.log("Connected"):"close"==e.type?console.log("Disconnected"):"message"==e.type?(console.log(e.data),z(!1)):"error"==e.type&&console.log("Error Occured")}Object(o.useEffect)(Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("In useEffect"),t={URL:"wss://btxwajfvk6.execute-api.us-east-1.amazonaws.com/dev",AppName:"CycleCountMaintenance",idArray:p},Object(D.b)(t,{socketHandler:je});case 3:case"end":return e.stop()}}),e)}))),[p]);var pe=o.useState(!1),be=Object(c.a)(pe,2);be[0],be[1];function xe(e){for(var n=0;n<t.length;n++)if(e==t[n].CycleCountStatusId)return t[n].CycleCountStatusDescription;return"Invalid Id"}var Oe=function(){var e=Object(a.a)(r.a.mark((function e(){var t,n,a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(Z),t=Z?Z.CycleCountStatusId:"",a=K?1:0,console.log("In apply handleFreeze",Y),c=Y?1:0,o=de||"",null==G){e.next=12;break}return e.next=9,Object(b.a)("/cycleCountMaintenance/getCycleCountMaintenanceTable?ItemKey="+o+"&AssignedTo="+G.key+"&PullDownInitiated="+a+"&CountStatus="+t+"&Freeze="+c+"&locationId="+s);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,Object(b.a)("/cycleCountMaintenance/getCycleCountMaintenanceTable?ItemKey="+o+"&AssignedTo=&PullDownInitiated="+a+"&CountStatus="+t+"&Freeze="+c+"&locationId="+s);case 14:n=e.sent;case 15:l(n.data);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=Object(A.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:"white"},"&:nth-of-type(even)":{backgroundColor:"#eee"}}}}))(S.a),ge=Object(A.a)((function(e){return{root:{padding:"0px 16px"}}}))(L.a),fe=o.useState(0),ye=Object(c.a)(fe,2),me=(ye[0],ye[1],o.useState(5)),ve=Object(c.a)(me,2),Ie=(ve[0],ve[1],o.useState(!1)),Ce=Object(c.a)(Ie,2),we=Ce[0],Se=Ce[1],ke=function(e){Se(e.target.checked)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(U.jsx)("div",{style:{width:"70%",border:"black"},children:Object(U.jsxs)(f.a,{container:!0,spacing:0,sx:{paddingLeft:{sm:3,xs:1},paddingRight:{sm:3,xs:1}},children:[Object(U.jsx)(f.a,{item:!0,xs:12,sm:4,sx:{display:"flex"},children:Object(U.jsx)(w.a,{style:{marginLeft:"30px"},disablePortal:!0,id:"itemSelect",options:ne,inputValue:re,onInputChange:function(){var e=Object(a.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oe(n),!n.length){e.next=7;break}return e.next=4,Object(b.a)("/cycleCountMaintenance/getItems?term="+n);case 4:if(a=e.sent,console.log(a.data),a.data){for(;ne.length;)ne.pop();for(c=0;c<a.data.length;c++)ne.push(a.data[c].ItemKey);ae(ne),console.log(ne)}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onChange:function(e,t){ue(t)},sx:{width:200,paddingTop:2,height:50},size:"small",renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Select Item",variant:"standard"}))}})}),Object(U.jsx)(f.a,{item:!0,xs:12,sm:4,sx:{display:"flex"},children:Object(U.jsx)(w.a,{disablePortal:!0,id:"assignedto",value:G,options:n,renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Select Assigned To",variant:"standard"}))},getOptionLabel:function(e){return e.value?e.value:""},onChange:function(e,t){J(t)},sx:{width:200,paddingTop:2},size:"small"})}),Object(U.jsxs)(f.a,{item:!0,xs:6,sm:4,sx:{display:"flex"},style:{marginTop:"24px"},children:[Object(U.jsx)("label",{style:{fontSize:"16px",fontWeight:"bold",marginTop:"6px"},children:"Pull Down Initiated:"}),Object(U.jsx)(m.a,{checked:K,onChange:function(e){N(e.target.checked),console.log(e.target.checked)}})]}),Object(U.jsx)(f.a,{item:!0,style:{marginLeft:"30px"},sx:{display:"flex"},children:Object(U.jsx)(w.a,{disablePortal:!0,value:Z,id:"pulldown",options:t,getOptionLabel:function(e){return e.CycleCountStatusDescription},onChange:function(e,t){$(t)},sx:{width:200,paddingTop:2},size:"small",renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Select CountStatus",variant:"standard"}))}})}),Object(U.jsxs)(f.a,{item:!0,xs:6,md:4,style:{marginLeft:"110px",marginTop:"20px"},sx:{display:"flex"},children:[Object(U.jsx)("label",{style:{fontSize:"16px",fontWeight:"bold",marginTop:"6px"},children:"Freeze:"}),Object(U.jsx)(m.a,{checked:Y,onChange:function(e){H(e.target.checked),console.log(e.target.checked)}})]}),Object(U.jsx)(f.a,{item:!0,sx:{display:"flex"},children:Object(U.jsx)(I.a,{size:"small",variant:"contained",color:"primary",style:{marginLeft:"100px",height:"40px",marginTop:"20px"},onClick:Oe,children:"Apply"})})]})}),Object(U.jsx)("div",{style:{borderLeft:"1px solid black",height:"150px",marginLeft:"0px",marginTop:"0px"}}),Object(U.jsxs)("div",{style:{width:"30%"},children:[Object(U.jsx)(f.a,{container:!0,spacing:0,sx:{paddingLeft:{sm:3,xs:1},paddingRight:{sm:3,xs:1}},children:Object(U.jsxs)(f.a,{sx:{display:"flex"},children:[Object(U.jsx)(w.a,{style:{marginLeft:"30px"},disablePortal:!0,id:"itemSelect",options:ne,sx:{width:200,paddingTop:2},size:"small",renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Select PullDown",variant:"standard"}))}}),Object(U.jsx)(I.a,{variant:"contained",color:"primary",style:{marginLeft:"50px",marginTop:"10px",height:"40px"},children:"Go"})]})}),Object(U.jsx)(f.a,{container:!0,spacing:0,sx:{paddingLeft:{sm:3,xs:1},paddingRight:{sm:3,xs:1}},children:Object(U.jsxs)(f.a,{item:!0,sx:{display:"flex"},children:[Object(U.jsx)(w.a,{style:{marginLeft:"30px"},disablePortal:!0,id:"countstatus",options:n,getOptionLabel:function(e){return e.value},sx:{width:200,paddingTop:2},size:"small",renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Select Reassign",variant:"standard"}))}}),Object(U.jsx)(I.a,{variant:"contained",color:"success",style:{marginLeft:"50px",marginTop:"10px",height:"40px"},children:"Reset"})]})})]})]}),Object(U.jsx)("div",{children:Object(U.jsx)(C.a,{sx:{width:"100%",overflow:"hidden"},children:Object(U.jsx)(T.a,{sx:{maxHeight:440},children:Object(U.jsxs)(h.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(U.jsxs)("colgroup",{children:[Object(U.jsx)("col",{width:"5%"}),Object(U.jsx)("col",{width:"5%"}),Object(U.jsx)("col",{width:"10%"}),Object(U.jsx)("col",{width:"11%"}),Object(U.jsx)("col",{width:"10%"}),Object(U.jsx)("col",{width:"10%"}),Object(U.jsx)("col",{width:"5%"}),Object(U.jsx)("col",{width:"10%"}),Object(U.jsx)("col",{width:"5%"}),Object(U.jsx)("col",{width:"5%"})]}),Object(U.jsx)(g.a,{children:Object(U.jsx)(he,{children:[{id:"item",label:"Item"},{id:"pallet",label:"Pallet/ PicLocation"},{id:"currentlocation",label:"Current Location"},{id:"assignedlocation",label:"Assigned Location"},{id:"totalquantity",label:"Pallet Quantity"},{id:"assignto",label:"Assign To"},{id:"pulldown",label:"PullDown"},{id:"status",label:"Status"},{id:"freeze",label:"Freeze"},{id:"sel",label:"Sel"}].map((function(e){return Object(U.jsxs)(ge,{style:{fontWeight:"bold"},children:[e.label,"Sel"==e.label?Object(U.jsx)("input",{type:"checkbox",style:{width:"20px",height:"20px"},checked:we,onChange:ke}):null]},e.id)}))})}),Object(U.jsx)(k.a,{children:i.map((function(e){return Object(U.jsxs)(he,{hidden:!1,children:[Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.ItemKey})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.InventoryIdentifier})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.CurrentLocation})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.AssignedLocation})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:"("+(e.FullLayers*e.CaseTrayPerLayer+e.ExtraCaseTrays)+" * "+e.QuantityPerCaseOrTray+" + "+e.ExtraQuantity+") = "+e.TotalQuantity})}),Object(U.jsx)(ge,{children:Object(U.jsx)(q,{assignedUsersList:n,ItemKey:e.ItemKey,locationId:s,inventorycyclecountsequenceId:e.InventoryCycleCountSequenceId,assignedUser:e.CountedBy,FacilityCode:e.FacilityCode,InventoryIdentifier:e.InventoryIdentifier,countstatus:e.CountStatusId,userFacility:d})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.IsPullDownCreated?"Yes":"No"})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:Object(U.jsxs)(f.a,{container:!0,spacing:0,children:[Object(U.jsx)(f.a,{item:!0,xs:!0,style:{marginTop:"10px"},children:xe(e.CountStatusId)}),Object(U.jsx)(f.a,{item:!0,xs:!0,style:{marginLeft:"0px"},children:Object(U.jsx)(R,{id:e.InventoryCycleCountId,FacilityCode:e.FacilityCode,userFacility:d})})]})})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",style:{marginRight:"30px"},children:Object(U.jsx)(E,{freeze:!!e.FreezeInventoryType,ID:e.Id,FacilityCode:e.FacilityCode,userFacility:d})})}),Object(U.jsx)(ge,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:Object(U.jsx)("input",{type:"checkbox",style:{width:"20px",height:"20px",marginLeft:"25px"},checked:we&&e.FacilityCode==d?we:null,disabled:e.FacilityCode!=d})})})]})}))})]})})})})]})}var K=n(17),N=n(361),M=n(480),B=n(490),Y=n(477),H=(n(53),n(351)),Q=n(354),V=n(194),G=n(4),J=n(20),_=n(281),X=n(132),Z=Object(G.a)("input")({fontSize:"18px",display:"inline-block",cursor:"pointer"}),$=function(e){if(!e.reportId)throw new Error("Import Button requires reportType prop");var t=Object(o.useState)(!1),n=Object(c.a)(t,2),s=n[0],l=n[1],d=Object(o.useState)({open:!1}),u=Object(c.a)(d,2),j=u[0],p=u[1],x=Object(o.useState)(null),O=Object(c.a)(x,2),h=O[0],g=O[1],f=Object(o.useState)(""),y=Object(c.a)(f,2),m=y[0],v=y[1],C=Object(J.a)(),w=function(){var t=Object(a.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h){t.next=4;break}return p({open:!0,message:"Please Select a file",severity:"warning"}),t.abrupt("return");case 4:l(!0),(c=new FileReader).readAsDataURL(h),c.onload=Object(a.a)(r.a.mark((function t(){var n,a,s,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.result,t.next=3,Object(b.d)(m,n);case 3:(a=t.sent).data&&(s=new Date,(o=document.createElement("a")).href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+a.data,o.download="".concat(e.reportId,"_").concat(s.toLocaleString(),".xlsx"),o.click(),l(!1));case 5:case"end":return t.stop()}}),t)}))),c.onerror=function(e){console.log("Error: ",e),l(!1)};case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){for(var t=e.data,n=Object.keys(t),a=Object.values(t),c="".concat("http://localhost:3001/dev","/ExportImport/import?reportId=").concat(e.reportId),s=0;s<n.length;s++)c=(c+="&")+n[s]+"="+a[s];console.log(c),v(c)}),[e]),Object(U.jsxs)(i.a.Fragment,{children:[j.open&&Object(U.jsx)(X.a,{open:j.open,close:p,time:2e3,message:j.message,severity:j.severity}),Object(U.jsxs)(_.a,{direction:"row",spacing:0,children:[Object(U.jsx)("label",{htmlFor:"contained-button-file",children:Object(U.jsx)(Z,{sx:{width:{xs:"12rem",sm:"20rem"}},accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",id:"contained-button-file",onChange:function(e){g(e.target.files[0])},type:"file"})}),Object(U.jsxs)(I.a,{variant:"contained",onClick:w,children:[!s&&"Import",s&&"Importing...",s&&Object(U.jsx)(V.a,{size:24,sx:{color:"".concat(C.palette.secondary.main),position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})]})},ee=n(383),te=[];function ne(e){var t=e.checked,n=e.inventorycyclecountsequenceId;t&&te.push(n);var a=o.useState([]),s=Object(c.a)(a,2);s[0],s[1];return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("input",{type:"checkbox",style:{width:"20px",height:"20px",marginLeft:"25px"},checked:t||null,onChange:function(e){if(console.log(n,e.target.checked),e.target.checked)te.push(n);else{var t=te.indexOf(n);te.splice(t,1),console.log(te)}console.log(te)}})})}function ae(e){var t=e.inventorycyclecountsequenceId,n=e.freezeStorageTypeid,s=(e.freezeStorageTypeDescription,e.freezeStoargeIds),i=e.setRows,l=e.tabledata,d=(e.open,e.setOpen),u=o.useState(n),j=Object(c.a)(u,2),p=j[0],x=j[1],O=function(){var e=Object(a.a)(r.a.mark((function e(n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(n.target.value),e.next=3,Object(b.c)("/cycleCountAssignment/updatefreezestorage?id="+t+"&freezestorageid="+n.target.value);case 3:if(a=e.sent,console.log(a.status),200===a.status){for(d({open:!0,message:"Record updated successfully!",severity:"success",time:2e3}),c=0;c<l.length;c++)l[c].InventoryCycleCountSequenceId==t&&(l[c].FreezeStorageTypeId=n.target.value);i(Object(K.a)(l))}else d({open:!0,message:"Record not updated!",severity:"error",time:2e3});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(H.a,{style:{width:"100px",height:"20px"},value:p,onChange:O,children:s.map((function(e,t){return Object(U.jsx)(Q.a,{value:e.FreezeStorageTypeId,children:e.FreezeStorageTypeDescription},e.FreezeStorageTypeId)}))})})}function ce(e){var t=e.assignedUsersList,n=e.ItemKey,s=e.locationId,i=e.inventorycyclecountsequenceId,l=e.freezeStorageTypeId,d=e.assignedUser,u=e.setRows,j=e.tabledata,p=(e.open,e.setOpen),x=o.useState(),h=Object(c.a)(x,2),g=h[0],f=h[1],y=o.useState(""),m=Object(c.a)(y,2),I=m[0],C=m[1],S=o.useState(""),k=Object(c.a)(S,2),L=(k[0],k[1]),T=function(){var e=Object(a.a)(r.a.mark((function e(t){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(t),f(t),e.next=4,Object(b.a)("/cycleCountAssignment/updateAssignedUser?itemKey="+n+"&locationId="+s+"&inventorycyclecountsequenceId="+i+"&assignedUser="+t+"&freezeStorageTypeId="+l);case 4:if(200===(a=e.sent).status)if("No Pallet and PickLocation Details exist"==a.data)p({open:!0,message:"No Pallet or PickLocation Details Exist!",severity:"success",time:2e3});else{for(c=0;c<j.length;c++)j[c].InventoryCycleCountSequenceId==i&&(j[c].AssignedUser=t,a.data.totalpallets&&(j[c].TotalPallets=a.data.totalpallets,j[c].PalletsCountPending=j[c].TotalPallets,j[c].IsPickLocationCounted=0==a.data.picklocationcount?null:0));u(Object(K.a)(j)),p({open:!0,message:"Record updated successfully!",severity:"success",time:2e3})}else p({open:!0,message:"A pending replenishment for this item: "+n+" exists.Please complete it",severity:"error",time:5e3}),f("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=d&&t.length>0&&f(d);case 1:case"end":return e.stop()}}),e)}))),[d]),Object(U.jsx)(w.a,{disablePortal:!0,value:g,onChange:function(e,t){T(t.key)},inputValue:I,onInputChange:function(e,t){C(t)},options:t,getOptionLabel:function(e){return e.value},sx:{width:"auto",marginLeft:0,marginRight:2},renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{variant:"outlined",size:"small"}))}})}function se(e){var t=e.assignedUsersList,n=e.locationId,s=e.locationCode,i=e.freezeStoargeIds,l=e.rows,d=e.setRows,u=Object(A.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:"white"},"&:nth-of-type(even)":{backgroundColor:"#eee"}}}}))(S.a),j=Object(A.a)((function(e){return{root:{padding:"0px 16px"}}}))(L.a),p=o.useState(!1),x=Object(c.a)(p,2),T=x[0],F=x[1],z=o.useState(!0),P=Object(c.a)(z,2),D=(P[0],P[1],o.useState(1)),R=Object(c.a)(D,2),E=(R[0],R[1],o.useState(!0)),q=Object(c.a)(E,2),W=q[0],K=q[1],H=o.useState(""),Q=Object(c.a)(H,2),V=Q[0],G=Q[1],J=o.useState(""),_=Object(c.a)(J,2),Z=(_[0],_[1],o.useState(!1)),se=Object(c.a)(Z,2),re=se[0],oe=se[1],ie=function(e){F(e.target.checked)},le=new Date;(le=new Date(Date.UTC(le.getFullYear(),le.getMonth(),le.getDate()))).setUTCDate(le.getUTCDate()+4-(le.getUTCDay()||7));var de=new Date(Date.UTC(le.getUTCFullYear(),0,1)),ue=Math.ceil(((le-de)/864e5+1)/7),je=function(){var e=Object(a.a)(r.a.mark((function e(){var t,a,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new Date,a=t.getFullYear(),d([]);l.length>0;)l.pop();return e.next=6,Object(b.a)("/cycleCountAssignment/getcountsequencedata?dueIn="+("more than 5"==V?6:V)+"&countPending="+W+"&locationId="+n+"&yearNumber="+a);case 6:for(c=(c=e.sent).data,[],s=0;s<c.length;s++)c[s].DueInWeekNumber=c[s].DueInWeekNumber<ue?-1:c[s].DueInWeekNumber-ue;d(c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=o.useState(""),be=Object(c.a)(pe,2),xe=be[0],Oe=be[1],he=o.useState(""),ge=Object(c.a)(he,2),fe=ge[0],ye=ge[1],me=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye(t.target.value),Oe(t.target.name);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(a.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<te.length;n++)(a={}).id=te[n],a.freezestorageid=xe,t.push(a);return e.next=4,Object(b.c)("/cycleCountAssignment/updateMultipleFreezeStorage",t);case 4:c=e.sent,console.log(c),oe({open:!0,message:"Records updated successfully!",severity:"success",time:2e3});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie={dueInWeeks:"more than 5"==V?52:V?parseInt(V)+ue:52,LocationCode:s},Ce={locationCode:s,locationId:n};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(X.a,{open:re.open,close:oe,message:re.message,severity:re.severity,time:re.time}),Object(U.jsxs)(f.a,{container:!0,spacing:2,children:[Object(U.jsx)(f.a,{item:!0,xs:4,children:Object(U.jsx)($,{reportId:"AssignItemCC",data:Ce})}),Object(U.jsx)(f.a,{item:!0,xs:.5,children:Object(U.jsx)(ee.a,{reportId:"AssignItemCC",data:Ie})})]}),Object(U.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(U.jsx)("div",{style:{width:"40%",border:"black"},children:Object(U.jsxs)(f.a,{container:!0,spacing:0,sx:{paddingLeft:{sm:3,xs:1},paddingRight:{sm:3,xs:1}},children:[Object(U.jsx)(f.a,{item:!0,xs:12,sm:4,sx:{display:"flex"},children:Object(U.jsx)(w.a,{disablePortal:!0,value:V,onChange:function(e,t){G(t)},options:["-1","0","1","2","3","4","5","more than 5"],sx:{width:300},renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Due In(weeks)",variant:"standard"}))}})}),Object(U.jsxs)(f.a,{item:!0,sx:{display:"flex"},style:{marginLeft:"50px"},children:[Object(U.jsx)("label",{style:{fontSize:"16px",fontWeight:"bold",marginTop:"25px"},children:"Count Pending:"}),Object(U.jsx)("div",{style:{marginTop:"20px",marginLeft:"20px"},children:Object(U.jsx)(m.a,{checked:W,onChange:function(e){K(e.target.checked)}})})]}),Object(U.jsx)(f.a,{item:!0,sx:{display:"flex"},children:Object(U.jsx)(I.a,{size:"small",variant:"contained",color:"primary",style:{marginLeft:"50px",width:"30px",height:"40px",marginTop:"20px"},onClick:je,children:"Apply"})})]})}),Object(U.jsx)("div",{style:{borderLeft:"1px solid black",height:"80px",marginLeft:"0px",marginTop:"0px"}}),Object(U.jsx)("div",{style:{width:"60%"},children:Object(U.jsxs)(f.a,{container:!0,spacing:0,sx:{paddingLeft:{sm:3,xs:1},paddingRight:{sm:3,xs:1}},children:[Object(U.jsx)(f.a,{sx:{display:"flex"},children:Object(U.jsx)(N.a,{component:"fieldset",children:Object(U.jsxs)(M.a,{row:!0,"aria-label":"options",name:"row-radio-buttons-group",style:{marginTop:"15px"},value:fe,onChange:me,children:[Object(U.jsx)("label",{style:{fontSize:"16px",fontWeight:"bold",marginTop:"7px"},children:"Freeze: \xa0\xa0"}),Object(U.jsx)(B.a,{name:"1",value:"None",control:Object(U.jsx)(Y.a,{}),label:"None"}),Object(U.jsx)(B.a,{name:"2",value:"Pick Only",control:Object(U.jsx)(Y.a,{}),label:"Pick Only"}),Object(U.jsx)(B.a,{name:"3",value:"All",control:Object(U.jsx)(Y.a,{}),label:"All"})]})})}),Object(U.jsx)(f.a,{item:!0,sx:{display:"flex"},style:{marginLeft:"50px",marginTop:"-15px"},children:Object(U.jsx)(w.a,{disablePortal:!0,sx:{width:200,paddingTop:2},size:"small",options:t,getOptionLabel:function(e){return e.value},renderInput:function(e){return Object(U.jsx)(v.a,Object(O.a)(Object(O.a)({},e),{},{label:"Select Assign To",variant:"standard"}))}})}),Object(U.jsx)(f.a,{item:!0,sx:{display:"flex"},children:Object(U.jsx)(I.a,{size:"small",variant:"contained",color:"success",style:{marginLeft:"50px",width:"30px",height:"40px",marginTop:"10px"},onClick:ve,children:"Go"})})]})})]}),Object(U.jsx)("div",{children:Object(U.jsx)(C.a,{sx:{width:"100%",overflow:"hidden"},children:Object(U.jsxs)(h.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(U.jsx)(g.a,{children:Object(U.jsx)(u,{children:[{id:"item",label:"Item"},{id:"countdue",label:"Count Due(In weeks)"},{id:"totalpallets",label:"Total Pallets"},{id:"countpending",label:"Count Pending"},{id:"picloccounted",label:"Pic Loc Counted"},{id:"freeze",label:"Freeze"},{id:"assignto",label:"Assign To"},{id:"sel",label:"Sel"}].map((function(e){return Object(U.jsxs)(j,{style:{fontWeight:"bold"},children:[e.label,"Sel"==e.label?Object(U.jsx)("input",{type:"checkbox",style:{width:"20px",height:"20px"},checked:T,onChange:ie}):null]},e.id)}))})}),Object(U.jsx)(k.a,{children:l.map((function(e){return Object(U.jsxs)(u,{children:[Object(U.jsx)(j,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.ItemKey})}),Object(U.jsx)(j,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.DueInWeekNumber})}),Object(U.jsx)(j,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.AssignedUser?e.TotalPallets:null})}),Object(U.jsx)(j,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.AssignedUser?e.PalletsCountPending:null})}),Object(U.jsx)(j,{children:Object(U.jsx)(y.a,{component:"span",variant:"body1",children:e.AssignedUser?null==e.IsPickLocationCounted?"N/A":e.IsPickLocationCounted?"Yes":"No":null})}),Object(U.jsx)(j,{children:Object(U.jsx)(ae,{inventorycyclecountsequenceId:e.InventoryCycleCountSequenceId,freezeStorageTypeid:e.FreezeStorageTypeId,freezeStorageTypeDescription:e.FreezeStorageTypeDescription,freezeStoargeIds:i,setRows:d,tabledata:l,open:re,setOpen:oe})}),Object(U.jsx)(j,{children:Object(U.jsx)(ce,{assignedUsersList:t,ItemKey:e.ItemKey,locationId:n,inventorycyclecountsequenceId:e.InventoryCycleCountSequenceId,freezeStorageTypeId:e.FreezeStorageTypeId,assignedUser:e.AssignedUser,setRows:d,tabledata:l,open:re,setOpen:oe})}),Object(U.jsx)(j,{children:Object(U.jsx)(ne,{checked:T,inventorycyclecountsequenceId:e.InventoryCycleCountSequenceId})})]})}))})]})})})]})}function re(){var e=o.useState(0),t=Object(c.a)(e,2),n=t[0],s=t[1],i=o.useState(""),O=Object(c.a)(i,2),h=O[0],g=O[1],f=o.useState(""),y=Object(c.a)(f,2),m=y[0],v=y[1],I=o.useState([]),C=Object(c.a)(I,2),w=C[0],S=C[1],k=o.useState([]),L=Object(c.a)(k,2),T=L[0],F=L[1],z=o.useState([]),P=Object(c.a)(z,2),D=P[0],A=P[1],R=o.useState(!0),E=Object(c.a)(R,2),q=E[0],K=E[1],N=o.useState([]),M=Object(c.a)(N,2),B=M[0],Y=M[1],H=o.useState([]),Q=Object(c.a)(H,2),V=Q[0],G=Q[1],J=Object(o.useContext)(p.a).FacilityCode;return Object(o.useEffect)(Object(a.a)(r.a.mark((function e(){var t,n,a,c,s,o,i,l,d,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("/cycleCountAssignment/getfreezestoragetype");case 2:return(t=e.sent)&&F(t.data),n="/common/getLocationCodeandLocationId?facilityCode="+J,e.next=7,Object(b.a)(n,"prssvl");case 7:if(!(a=e.sent).data||!a.data[0]){e.next=19;break}for(g(a.data[0].LocationCode),v(a.data[0].LocationId),c="/common/getAssignedUsersList?locationCode="+a.data[0].LocationCode,s=localStorage.getItem("AllowedUserRoles"),o=s.split(","),i=0;i<o.length;i++)c+="&userRoles="+o[i];return e.next=17,Object(b.a)(c,"prssvl");case 17:(l=e.sent).data&&l.data.Header.IsSuccess&&l.data.Body&&(l=l.data.Body.UserList,d=Object.keys(l),console.log(d),d.forEach((function(e,t){var n={};n.key=e,n.value=l[e],w.push(n)})),S(w));case 19:return e.next=21,Object(b.a)("/cycleCountMaintenance/getCycleCountStatus");case 21:(u=e.sent).data&&A(u.data),200===u.status&&200===t.status&&200===a.status&&K(!1);case 24:case"end":return e.stop()}}),e)}))),[]),q?Object(U.jsx)(x.a,{}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(u.a,{sx:{width:"100%"},children:Object(U.jsxs)(l.a,{onChange:function(e,t){s(t)},value:n,"aria-label":"Tabs where selection follows focus",selectionFollowsFocus:!0,children:[Object(U.jsx)(d.a,{label:"Cycle Count Assignment",style:{fontWeight:"bolder"},value:0}),Object(U.jsx)(j.a,{orientation:"vertical",variant:"middle",flexItem:!0,style:{fontWeight:"bold"}}),Object(U.jsx)(d.a,{label:"Cycle Count Maintenance",value:1})]})}),0==n?Object(U.jsx)(se,{assignedUsersList:w,locationId:m,locationCode:h,freezeStoargeIds:T,rows:B,setRows:Y}):Object(U.jsx)(W,{countStatus:D,assignedUsersList:w,locationId:m,row:V,setRow:G,facilityCode:J})]})}}}]);
//# sourceMappingURL=11.5d081c9a.chunk.js.map